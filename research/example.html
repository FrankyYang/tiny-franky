<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>编辑_游戏库_乐高</title>
<link rel='stylesheet' href='../public/stylesheets/bootstrap.css' />
<link href="../public/stylesheets/bootstrap-responsive.css" rel="stylesheet">
<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet">
<script src="../public/javascripts/jquery.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<meta charset="utf-8">
<script></script>
<style type="text/css">
body {
    padding-top: 60px;
    padding-bottom: 40px;
}
.hero-appicon {
    background: #eee;
    border-radius: 6px;
    margin-bottom: 30px;
    padding: 20px 60px 60px;
}
.appicon {
    overflow:hidden;
}
.appicon ul {
    width: 110%;
}
.appicon li {
    list-style: none;
    float: left;
    display: inline;
    margin: 40px 40px 0 0;
}
/**
 * 表单相关的样式
 */
.form-container {
  border: 1px solid #cdcdcd;
  background-color: rgba(252, 248, 248, 0.47);
  margin-bottom: 15px;
  width: 600px;
}

.form-container hr.dotted {
    margin: 10px 0;
    border: 0;
    border-top: 1px dashed #bfbfbf;
    border-bottom: 1px dashed #ffffff;
}

.form-container .container .form-inline {
    margin: 0;
}

.form-container .container, .form-container .module-container {
    margin: 20px;
}

.form-horizontal .form-actions {
    background-color: white;
    border: 0;
    width: 420px;
}
.editor .close-custom {
    right: -420px;
    position: relative;
}
.editor .container {
    width: 600px;
}
</style>
</head>

<body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Web APP</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="/">首页</a></li>
                <li><a href="/login">登录</a></li>
                <li><a href="/reg">注册</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="container" class="container">
        <div class="hero-unit" data-cms="welcom">
            <h1>欢迎来到web应用广场</h1>
            <p>Web APPs是一个展示各种有用的网络程序的地方。</p>
            <p>
                <a class="btn btn-primary btn-large" href="/login">登录</a>
                <a class="btn btn-large" href="/reg">注册</a>
            </p>
        </div>

        <div class="hero-appicon" data-cms="applist">
            <div class="appicon">
                <ul>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                    <li><a href="" target="_blank"><img src="http://i.gtimg.cn/qqlive/images/20111219/i1324268758_1.jpg" alt="" /></a></li>
                </ul>
            </div>
        </div>

        <hr />

        <footer>
            <p><a href="javascript:;">云帆高科</a> 2013</p>
        </footer>
    </div>

    <div id="ToolTip" class="ui-tooltip progress-border" style="display:none;" draggable="true">
        <div class="btn-group">
            <button class="btn btn-primary btn-mini" id="EditWidget">编辑</button>
            <button class="btn btn-info btn-mini">删除</button>
            <button class="btn btn-info btn-mini">保存</button>
            <button class="btn btn-warning btn-mini" id="TipHide">关闭</button>
        </div>
    </div>

    <div id="WidgetEditor" class="ui-tooltip editor" style="display:none;width:600px;height:600px;max-width:1024px;background-color:#fff;" draggable="true">
        <div class="container editor-form">
            <legend>定义可编辑内容
                <a type="button" class="close-custom">×</a>
            </legend>

            <table style="display:none;">
                <thead>
                    <tr>
                        <td>选择器</td>
                        <td>典型值</td>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <form class="form-horizontal">
                <div class="form-container">
                    <div class="container">

                        <div class="control-group">
                            <label class="control-label" for="selector">选择器</label>
                            <div class="controls">
                                <input type="text" id="selector" placeholder="p.content">
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="TypeValue">典型值</label>
                            <div class="controls">
                                <input type="text" id="TypeValue" placeholder="乐高组件">
                            </div>
                        </div>

                    </div>
                </div>

                <div class="module-container">
                    <div class="form-actions">
                        <button id="SaveButton" type="button" class="btn btn-orange btn-large">提交</button>
                        <button id="PreviewButton" type="button" class="btn btn-orange btn-large">预览</button>
                    </div>
                </div>

            </form>
        </div>

        <div class="editor-preview" style="display:none;">
            <button id="BackButton" type="button" class="btn btn-orange btn-large">预览</button>
        </div>
    </div>

</body>

<script>
    $(function () {
        var $tip = $('#ToolTip');
        var $editor = $('#WidgetEditor');
        var timerId;
        var timeoutValue = 2500;
        var showFlag = true;
        var stopTimeout = function () {
            if (timerId) {
                clearTimeout(timerId);
                timerId = null;
            }
        };

        var SPACE_WIDTH = 50;
        var SPACE_HEIGHT = 20;

        $('[data-cms]').each(function (key, value) {
            var $dom = $(value);

            $dom.css('border-color', 'red').css('border-style', 'solid').css('border-width', '1px');
            $dom.on('hover', function () {
                var $dom = $(this);

                if (!showFlag) return;

                console.log('Hover in DOM!');
                stopTimeout();
                $tip.css('left', $dom.position().left)
                    .css('top', $dom.position().top)
                    .show();
            });

            /*
            .on('mouseout', function () {
                console.log('Hover out DOM!');
                stopTimeout();
                timerId = setTimeout(function () {
                    $tip.hide();
                }, timeoutValue);
            });
            */
        });

        $tip.on('hover', function (event) {
            console.log('Hover in tip!');
            stopTimeout();
        });

        /*
        .on('mouseout', function (event) {
            console.log('Hover out tip!');
            stopTimeout();
            timerId = setTimeout(function () {
                $tip.hide();
            }, timeoutValue);
        });
        */

        $('#TipHide').on('click', function () {
            $tip.hide();
            showFlag = false;
            setTimeout(function () {
                showFlag = true;
            }, 2000);
        });

        $('#EditWidget').on('click', function () {
            $editor.css('left', $(document).width() - $editor.width() - SPACE_WIDTH)
                .css('top', $(document).height() - $editor.height() - SPACE_HEIGHT)
                .show();
        });

        $('#WidgetEditor').find('.close-custom').on('click', function () {
            $editor.hide();
        });

        $('#BackButton').on('click', function () {
            var $container = $('#WidgetEditor');
        });
    });
</script>
</html>
